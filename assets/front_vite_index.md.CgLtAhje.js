import{_ as i,c as a,a4 as n,o as p}from"./chunks/framework.BDeXF6e8.js";const g=JSON.parse('{"title":"Viteæ ¸å¿ƒåŸç†","description":"","frontmatter":{},"headers":[],"relativePath":"front/vite/index.md","filePath":"front/vite/index.md","lastUpdated":1734489342000}'),l={name:"front/vite/index.md"};function t(h,s,e,k,E,r){return p(),a("div",null,s[0]||(s[0]=[n(`<h1 id="viteæ ¸å¿ƒåŸç†" tabindex="-1">Viteæ ¸å¿ƒåŸç† <a class="header-anchor" href="#viteæ ¸å¿ƒåŸç†" aria-label="Permalink to &quot;Viteæ ¸å¿ƒåŸç†&quot;">â€‹</a></h1><ol><li><p>webpackçš„ç—›ç‚¹åœ¨å“ªé‡Œï¼Ÿ</p><ul><li><p>åœ¨æ„å»ºå¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œéå¸¸çš„æ…¢</p></li><li><p>å› ä¸ºåœ¨å¯åŠ¨ webpack é¡¹ç›®çš„æ—¶å€™ï¼Œwebpack ä¼šå…ˆå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åè¿è¡Œçš„æ˜¯æ‰“åŒ…åçš„æ–‡ä»¶</p><img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2024-07-28-031130.png" alt="image-20240728111129836" style="zoom:30%;"></li></ul></li><li><p>Viteæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</p><ul><li><p>å®Œå…¨è·³è¿‡æ‰“åŒ…æ­¥éª¤ï¼Œåˆ©ç”¨æµè§ˆå™¨çš„ imports æœºåˆ¶ï¼ŒæŒ‰éœ€è·å–å†…å®¹</p><img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2024-07-28-031211.png" alt="image-20240728111211153" style="zoom:30%;"></li><li><p>æµè§ˆå™¨é’ˆå¯¹ .vue è¿™æ ·çš„æ¨¡å—æ–‡ä»¶ï¼Œéœ€è¦åšç¼–è¯‘ï¼Œç¼–è¯‘ä¸º JS æ–‡ä»¶å†è¿”å›ç»™æµè§ˆå™¨</p><img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2021-11-07-124403.png" alt="image-20211107204402787" style="zoom:50%;"></li><li><p>å…³äº Vite ä¸­çƒ­æ›´æ–°çš„å®ç°ï¼Œåº•å±‚å®é™…ä¸Šä½¿ç”¨çš„æ˜¯ websocket æ¥å®ç°çš„ã€‚</p></li></ul></li></ol><h1 id="viteé…ç½®æ–‡ä»¶" tabindex="-1">viteé…ç½®æ–‡ä»¶ <a class="header-anchor" href="#viteé…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;viteé…ç½®æ–‡ä»¶&quot;">â€‹</a></h1><p>åœ¨ Vite ä¸­ï¼Œé…ç½®æ–‡ä»¶<strong>é¡¹ç›®æ ¹ç›®å½•ä¸‹</strong>çš„ vite.config.js æ–‡ä»¶ï¼Œæœ€åŸºæœ¬çš„æ ¼å¼ä¸ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é…ç½®é€‰é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¦‚æœä½ çš„ Vite é…ç½®æ–‡ä»¶ä¸åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ --config æ¥è¿›è¡ŒæŒ‡å®šï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-config.js</span></span></code></pre></div><p>Vite æä¾›äº†ä¸€ä¸ªå·¥å…·å‡½æ•° defineConfigï¼Œé€šè¿‡å®ƒå¯ä»¥<strong>æ–¹ä¾¿çš„è·å–ç±»å‹æç¤º</strong>ï¼Œè¿™å¯¹äºä½¿ç”¨ TS ç¼–å†™é…ç½®å°¤å…¶æœ‰ç”¨ã€‚</p><p>æ‰€ä»¥ä¸€èˆ¬ Vite é…ç½®æ–‡ä»¶çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é…ç½®é€‰é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>åœ¨ Vite ä¸­ï¼Œé…ç½®å¤§è‡´åˆ†ä¸ºè¿™ä¹ˆå‡ ç±»ï¼š</p><ol><li>æ™®é€šé…ç½®ï¼šè®¾ç½®é¡¹ç›®çš„åŸºæœ¬é€‰é¡¹ï¼Œåˆ«åã€æ ¹ç›®å½•ã€æ’ä»¶....</li><li>å¼€å‘æœåŠ¡å™¨é…ç½®ï¼šå¼€å‘æœåŠ¡å™¨çš„åŠŸèƒ½ï¼Œå¼€å‘æœåŠ¡å™¨çš„ç«¯å£ã€ä»£ç†ã€CORS....</li><li>æ„å»ºé…ç½®ï¼šæ„å»ºç”Ÿäº§ç‰ˆæœ¬æ—¶å€™çš„é…ç½®ï¼Œè¾“å‡ºç›®å½•ã€å‹ç¼©ã€CSSä»£ç æ‹†åˆ†....</li><li>é¢„è§ˆé…ç½®ï¼šé…ç½®é¢„è§ˆæœåŠ¡å™¨çš„è¡Œä¸ºï¼Œç«¯å£ã€ä¸»æœºå...</li><li>ä¾èµ–ä¼˜åŒ–é…ç½®ï¼šé’ˆå¯¹ä¾èµ–é¢„æ‰“åŒ…åšä¸€äº›é…ç½®ï¼Œæ¯”å¦‚å¯ä»¥æ–°å¢åŒ…æˆ–è€…æ’é™¤åŒ…</li><li>SSRé…ç½®ï¼šæœåŠ¡å™¨ç«¯æ¸²æŸ“ç›¸å…³é…ç½®</li><li>Workeré…ç½®ï¼šWeb Workerç›¸å…³é…ç½®</li></ol><h2 id="æ™®é€šé…ç½®" tabindex="-1">æ™®é€šé…ç½® <a class="header-anchor" href="#æ™®é€šé…ç½®" aria-label="Permalink to &quot;æ™®é€šé…ç½®&quot;">â€‹</a></h2><p><strong>1. root</strong></p><ul><li>ç±»å‹ï¼šstring</li><li>é»˜è®¤å€¼ï¼šprocess.cwd( ) ï¼Œé»˜è®¤å°±æ˜¯<strong>é¡¹ç›®æ ¹ç›®å½•</strong></li><li>æè¿°ï¼š<strong>index.html æ‰€åœ¨ä½ç½®</strong>ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-project/</span></span>
<span class="line"><span>â”œâ”€â”€ public/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ index.html</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.js</span></span>
<span class="line"><span>â”‚   â””â”€â”€ App.vue</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ root æ¥è¿›è¡Œé…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  root: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°†é¡¹ç›®æ ¹ç›®å½•è®¾ç½®ä¸º &#39;public&#39; æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>2. define</strong></p><ul><li><p>ç±»å‹ï¼šRecord&lt;string, any&gt;</p></li><li><p>æè¿°ï¼š<strong>å®šä¹‰å…¨å±€å¸¸é‡æ›¿æ¢</strong>ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™äº›æ¡ç›®å°†è¢«å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼Œè¢«å®šä¹‰ä¸ºå…¨å±€å˜é‡åï¼Œæ„å‘³ç€ä¸éœ€è¦é€šè¿‡ import æ¥å¯¼å…¥ï¼Œç›´æ¥ä½¿ç”¨ï¼›åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä¼šè¢«é™æ€æ›¿æ¢ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  define: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    __APP_VERSION__: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;v1.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    __API_URL__: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;window.__backend_api_url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ul><blockquote><p>æ³¨æ„ï¼šVite ä½¿ç”¨ esbuild çš„ define è¿›è¡Œæ›¿æ¢ï¼Œå› æ­¤å€¼è¡¨è¾¾å¼å¿…é¡»æ˜¯åŒ…å« <strong>JSON å¯åºåˆ—åŒ–</strong>çš„ å€¼ï¼ˆnullã€booleanã€numberã€stringã€arrayã€objectï¼‰çš„å­—ç¬¦ä¸²æˆ–å•ä¸ªæ ‡è¯†ç¬¦ã€‚å¯¹äºéå­—ç¬¦ä¸²å€¼ï¼ŒVite ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ã€‚</p></blockquote><p><strong>3. resolve</strong></p><p>resolve å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œå¯¹è±¡é‡Œé¢å¯¹åº”äº†å¥½å‡ é¡¹é…ç½®ã€‚</p><p><strong>alias</strong></p><p>ç”¨äºé…ç½®<strong>è·¯å¾„åˆ«å</strong>ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–æ¨¡å—è·¯å¾„å¼•ç”¨ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alias: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å°† &#39;@&#39; æŒ‡å‘ &#39;src&#39; ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å°† &#39;@components&#39; æŒ‡å‘ &#39;src/components&#39; ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@components&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/components&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å°† &#39;@utils&#39; æŒ‡å‘ &#39;src/utils&#39; ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;@utils&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/utils&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ä¹‹ååœ¨ä»£ç ä¸­å°±å¯ä»¥é€šè¿‡åˆ«åæ¥æŒ‡å®šç›®å½•ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./App.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HelloWorld </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@components/HelloWorld.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ &#39;@components&#39; alias</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { helperFunction } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@utils/helpers&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ &#39;@utils&#39; alias</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(App).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>extensions</strong></p><p>åœ¨å¯¼å…¥æ—¶çœç•¥æ–‡ä»¶æ‰©å±•åæ—¶ï¼Œå°è¯•çš„æ–‡ä»¶æ‰©å±•ååˆ—è¡¨ã€‚</p><blockquote><p>æ³¨æ„ï¼Œä¸æ¨èå¯¹è‡ªå®šä¹‰å¯¼å…¥ç±»å‹ï¼ˆå¦‚ .vueï¼‰çœç•¥æ‰©å±•åï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¹²æ‰° IDE å’Œç±»å‹æ”¯æŒã€‚</p></blockquote><p>é»˜è®¤å€¼ä¸º <code>[&#39;.mjs&#39;, &#39;.js&#39;, &#39;.mts&#39;, &#39;.ts&#39;, &#39;.jsx&#39;, &#39;.tsx&#39;, &#39;.json&#39;]</code></p><p>å¯ä»¥è‡ªå®šä¹‰æ‰©å±•åçš„é¡ºåºï¼Œæ¯”å¦‚ä¼˜å…ˆåŒ¹é… ts ç±»å‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resolve: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    extensions: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.tsx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.jsx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªå®šä¹‰æ‰©å±•åé¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>4. CSS</strong></p><p>CSS é…ç½®é¡¹å¯¹åº”çš„å€¼åŒæ ·æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œä¸€ä¸ªåŸºæœ¬çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å…¶ä»–é…ç½®é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸è§çš„é…ç½®é¡¹ï¼š</p><p><strong>postcss</strong>ï¼šè¯¥é…ç½®é¡¹ç”¨äº<strong>é…ç½® PostCSS çš„è¡Œä¸º</strong>ï¼Œå¯ä»¥æ˜¯<strong>å†…è”çš„ PostCSS é…ç½®</strong>ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>è‡ªå®šä¹‰ç›®å½•</strong>ã€‚</p><p>å†…è” PostCSS é…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> autoprefixer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;autoprefixer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cssnano </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cssnano&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    postcss: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åœ¨è¿™é‡Œé…ç½® postcss ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨å“ªä¸ªæ’ä»¶....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        autoprefixer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        cssnano</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>è‡ªå®šä¹‰ç›®å½•ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-project/</span></span>
<span class="line"><span>â”œâ”€â”€ config/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ postcss.config.js</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ main.js</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™ç›´æ¥æŒ‡å®š postcss çš„ç›®å½•å°±å¯ä»¥äº†ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    postcss: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;config&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æŒ‡å®šè‡ªå®šä¹‰ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>preprocessorOptions</strong>ï¼šè¯¥é…ç½®é¡¹ç”¨äºä¸º <strong>CSS é¢„å¤„ç†å™¨</strong>æŒ‡å®šé…ç½®ï¼Œ<strong>æ–‡ä»¶æ‰©å±•å</strong>ç”¨äº<strong>ä½œä¸ºé”®</strong>æ¥è®¾ç½®é€‰é¡¹ã€‚æ¯ä¸ªé¢„å¤„ç†å™¨æ”¯æŒçš„é€‰é¡¹å¯ä»¥åœ¨å®ƒä»¬å„è‡ªçš„æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š</p><ul><li><a href="https://sass-lang.com/documentation/js-api/interfaces/legacystringoptions/" target="_blank" rel="noreferrer">Sass/Scss</a> æ”¯æŒçš„é…ç½®é€‰é¡¹</li><li><a href="https://lesscss.org/usage/#less-options" target="_blank" rel="noreferrer">Less</a> æ”¯æŒçš„é…ç½®é€‰é¡¹</li><li>styl/stylus - ç›®å‰ä»…æ”¯æŒ <a href="https://stylus-lang.com/docs/js.html#define-name-node" target="_blank" rel="noreferrer">define</a>ï¼Œå¯ä»¥ä½œä¸ºå¯¹è±¡ä¼ é€’ã€‚</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é…ç½® css é¢„å¤„ç†å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preprocessorOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      less: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        math: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;parens-division&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      styl: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç›®å‰ä»…æ”¯æŒ define</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        define: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          $specialColor: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stylus.nodes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RGBA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">51</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">197</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>preprocessorOptions[extension].additionalData</strong>ï¼šå½“ä½ æƒ³è¦ä¸º CSS é¢„å¤„ç†å™¨ï¼ˆå¦‚ SCSSã€SASSã€Less ç­‰ï¼‰æ·»åŠ å…¨å±€æ ·å¼ã€å˜é‡ã€æˆ–æ··åˆå™¨æ—¶ï¼Œè¯¥é€‰é¡¹éå¸¸æœ‰ç”¨ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preprocessorOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      scss: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è¿™é‡Œæ·»åŠ äº†ä¸€äº›å…¨å±€å˜é‡ï¼Œä¹‹ååœ¨ä»»ä½•çš„ Scss æ–‡ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å…¨å±€å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        additionalData: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`$injectedColor: orange; $defaultMargin: 10px;\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preprocessorOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      scss: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç›¸å½“äºç»™æ‰€æœ‰çš„ Scss æ–‡ä»¶çš„å¤´éƒ¨éƒ½æ·»åŠ äº†è¿™ä¸ªå¼•ç”¨ï¼Œè‡ªåŠ¨å¯¼å…¥ mixins.scss æ··åˆå™¨æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        additionalData: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`@import &quot;@/styles/mixins.scss&quot;;\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>preprocessorMaxWorkers</strong>ï¼šå¦‚æœå¯ç”¨äº†è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆ CSS é¢„å¤„ç†å™¨ä¼šå°½å¯èƒ½åœ¨ worker çº¿ç¨‹ä¸­è¿è¡Œã€‚å¯ä»¥è®¾ç½® number å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å¸ƒå°”å€¼ï¼Œä¾‹å¦‚è®¾ç½®æˆ true çš„è¯è¡¨ç¤º CPU æ•°é‡å‡ 1.</p><p><strong>devSourcemap</strong>ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­æ˜¯å¦å¯ç”¨ source mapsï¼Œé»˜è®¤å€¼ä¸º false.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  css: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¼€å¯ source maps</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    devSourcemap: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>transformer</strong>ï¼šæŒ‡å®š CSS å¤„ç†çš„å¼•æ“ï¼Œå¯ä»¥è®¾ç½®çš„å€¼å°±ä¸¤ä¸ªï¼Œ&#39;postcss&#39; æˆ–è€… &#39;lightningcss&#39;</p><blockquote><p>lightingcss å°±æ˜¯ postcss çš„ rust ç‰ˆæœ¬ã€‚</p></blockquote><h2 id="æœåŠ¡å™¨é…ç½®" tabindex="-1">æœåŠ¡å™¨é…ç½® <a class="header-anchor" href="#æœåŠ¡å™¨é…ç½®" aria-label="Permalink to &quot;æœåŠ¡å™¨é…ç½®&quot;">â€‹</a></h2><p>æœåŠ¡å™¨é…ç½®æ˜¯æŒ‡<strong>å¼€å‘æœåŠ¡å™¨</strong>ï¼Œå¯¹åº”çš„é…ç½®é¡¹æ˜¯ server</p><p>ä¸€ä¸ªåŸºæœ¬çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¼—å¤šé…ç½®é¡¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸è§çš„é…ç½®é¡¹ï¼š</p><p><strong>host</strong></p><p>æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ª IP åœ°å€ï¼Œé»˜è®¤æ˜¯ localhost.</p><p>ç±»å‹ï¼š string | boolean</p><p>é»˜è®¤ï¼š &#39;localhost&#39;</p><p>æ€è€ƒğŸ¤” æ­£å¸¸æƒ…å†µä¸‹å°±æ˜¯ localhost å°±å¥½äº†å‘€ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¿˜å­˜åœ¨è¦ä¿®æ”¹ host çš„æƒ…å†µå‘¢ï¼Ÿ</p><p>ç­”æ¡ˆï¼šé™¤äº† localhost ä»¥å¤–ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜éœ€è¦è®¾ç½®ä¸º 0.0.0.0 æˆ–è€… trueï¼Œè¡¨ç¤ºç›‘å¬æ‰€æœ‰çš„ç½‘ç»œæ¥å£è¯·æ±‚ã€‚æœ‰äº›æ—¶å€™éœ€è¦å¤šè®¾å¤‡æ¥æµ‹è¯•åº”ç”¨ã€‚</p><p><strong>port</strong></p><p>ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤æ˜¯ 5173.</p><p><strong>strictPort</strong></p><p>å¦‚æœè®¾ç½®ä¸º trueï¼ŒVite å°†<strong>ä¸¥æ ¼ä½¿ç”¨æŒ‡å®šçš„ç«¯å£</strong>ã€‚å¦‚æœç«¯å£è¢«å ç”¨ï¼ŒæœåŠ¡å™¨å¯åŠ¨å°†å¤±è´¥ã€‚</p><p><strong>proxy</strong></p><p>è¿™ä¸ªé…ç½®é¡¹éå¸¸å¸¸ç”¨ï¼Œç”¨äº<strong>é…ç½®ä»£ç†æœåŠ¡å™¨</strong>ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proxy: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;/foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://localhost:4567&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°† &#39;/foo&#39; å‰ç¼€çš„è¯·æ±‚ä»£ç†åˆ° &#39;http://localhost:4567&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>å¯¹åº”çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„å½¢å¼ï¼Œå¯¹è±¡å½¢å¼èƒ½å¤ŸåŒ…å«æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proxy: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;/api&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;http://jsonplaceholder.typicode.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        changeOrigin: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rewrite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">api</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é‡å†™è·¯å¾„ï¼Œå°† &#39;/api&#39; å‰ç¼€å»æ‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>open</strong></p><p>å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶<strong>æ˜¯å¦è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨</strong>ï¼Œé»˜è®¤å€¼æ˜¯ false.</p><p><strong>https</strong></p><p>æ˜¯å¦å¯ç”¨ HTTPSã€‚å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®š <strong>SSL è¯ä¹¦</strong>å’Œ<strong>ç§é’¥</strong>çš„è·¯å¾„ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    https: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      key: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      cert: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/server.crt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>watch</strong></p><p>è‡ªå®šä¹‰æ–‡ä»¶ç›‘è§†å™¨çš„é€‰é¡¹ã€‚è¿™å¯¹äºå¼€å‘è¿‡ç¨‹ä¸­çš„çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰éå¸¸å…³é”®ã€‚èƒŒåå…¶å®ä½¿ç”¨çš„æ˜¯ chokidarï¼Œä¸€ä¸ª Node.js çš„æ–‡ä»¶ç³»ç»Ÿç›‘å¬åº“ï¼Œå®ƒæä¾›äº†å¤šç§å¯é…ç½®çš„ç›‘å¬é€‰é¡¹ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    watch: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä»»ä½•ä½äº ignored-directory ç›®å½•ä¸‹çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æˆ–è€…ä»»ä½•ç›®å½•ä¸‹é¢çš„ some-specific-file.txt æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å†…å®¹å‘ç”Ÿæ›´æ”¹éƒ½ä¸ä¼šè§¦å‘ HMR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ignored: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/ignored-directory/**&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/some-specific-file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>watch è¿˜æ”¯æŒæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    watch: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ignored: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/temp/**&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¿½ç•¥ temp ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      persistent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒç»­ç›‘å¬å˜åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      usePolling: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨è½®è¯¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      interval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è½®è¯¢é—´éš” 100 æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      binaryInterval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¯¹äºäºŒè¿›åˆ¶æ–‡ä»¶çš„è½®è¯¢é—´éš”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>å¦‚æœæƒ³è¦å…³é—­æ–‡ä»¶ç›‘å¬ï¼Œç›´æ¥è®¾ç½®ä¸º null å³å¯ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    watch: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h1 id="ä¾èµ–é¢„æ„å»º" tabindex="-1">ä¾èµ–é¢„æ„å»º <a class="header-anchor" href="#ä¾èµ–é¢„æ„å»º" aria-label="Permalink to &quot;ä¾èµ–é¢„æ„å»º&quot;">â€‹</a></h1><p><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>ä¸€å¥è¯æ€»ç»“ï¼šåœ¨ä½ <strong>é¦–æ¬¡</strong>ä½¿ç”¨ Vite å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šæŠŠä½ çš„é¡¹ç›®<strong>ä¾èµ–</strong>é¢„å…ˆæ„å»ºä¸€æ¬¡ã€‚</p><p>æ€è€ƒğŸ¤”ï¼šå‰é¢ä¸æ˜¯è¯´ Vite ç›¸æ¯” Webpack çš„ä¼˜ç‚¹ä¸å°±æ˜¯ä¸æ‰“åŒ…ä¹ˆï¼Ÿè¿™é‡Œé¢„æ„å»ºåˆæ˜¯æ€ä¹ˆä¸€å›äº‹å„¿ï¼Ÿ</p><p>å­˜åœ¨çš„é—®é¢˜ï¼š</p><ol><li>ä¾èµ–æ–‡ä»¶è¿‡å¤šï¼Œå¯¼è‡´è¯·æ±‚è¿‡å¤š</li><li>æŸäº›ä¾èµ–ä»ç„¶æ˜¯ä»¥ CommonJS æ ¼å¼å‘å¸ƒçš„ï¼Œå®ƒä»¬å¹¶ä¸å…¼å®¹åŸç”Ÿ ESM ç¯å¢ƒ</li></ol><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ï¼ŒViteåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šé’ˆå¯¹ <strong>ä¾èµ–</strong> è¿›è¡Œä¸€ä¸ªé¢„æ„å»ºï¼ˆæ‰“åŒ…ï¼‰</p><p>é¢„æ„å»ºé˜¶æ®µæ‰€ä½¿ç”¨çš„æ‰“åŒ…å·¥å…·æ˜¯ <a href="https://esbuild.github.io/" target="_blank" rel="noreferrer">esbuild</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„æ„å»ºå·¥å…·ï¼Œæ•ˆç‡æé«˜ï¼Œ<strong>å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯å¹¶è¡Œå¤„ç†çš„</strong>ï¼Œesbuild èƒ½å¤Ÿè¿…é€Ÿå°†ä¾èµ–è½¬æ¢ä¸ºæœ‰æ•ˆçš„ ES æ¨¡å—æ ¼å¼ï¼Œå¹¶è¿›è¡Œæ‰“åŒ…ï¼Œä»è€Œä¼˜åŒ–ä¾èµ–ç®¡ç†å’ŒåŠ è½½æ•ˆç‡ã€‚</p><p>esbuild æ‰€åšçš„äº‹æƒ…ï¼š</p><ol><li>è½¬æ¢ï¼šå°†ä¸€äº› CommonJSã€UMD æ ¼å¼çš„æ¨¡å—è½¬æ¢ä¸º ES æ¨¡å—æ ¼å¼ã€‚</li><li>æ‰“åŒ…ï¼šé’ˆå¯¹ä¾èµ–è¿›è¡Œæ‰“åŒ…ï¼Œå‡å°‘æµè§ˆå™¨åœ¨å¼€å‘ç¯å¢ƒè¯·æ±‚çš„æ¬¡æ•°ã€‚</li><li>æœ€å°åŒ–å’Œå‹ç¼©ï¼šè¿™ä¸ªæ˜¯åœ¨æ„å»ºé˜¶æ®µï¼Œé’ˆå¯¹ä»£ç çš„æœ€å°åŒ–å’Œå‹ç¼©ä¹Ÿæ˜¯ esbuild æ¥åšçš„ã€‚</li></ol><p><strong>ç¼“å­˜</strong></p><p>ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼š</p><ol><li>æ–‡ä»¶ç¼“å­˜</li><li>æµè§ˆå™¨ç¼“å­˜</li></ol><p>é’ˆå¯¹ä¾èµ–é¡¹åšæ„å»ºåï¼Œä¼šå°†æ„å»ºäº§ç‰©åšç¼“å­˜ï¼Œç¼“å­˜åˆ° node_modules/.vite ç›®å½•ä¸‹é¢ã€‚</p><p>ä»€ä¹ˆæ—¶å€™éœ€è¦é‡æ–°è¿è¡Œé¢„æ„å»ºæ­¥éª¤ï¼š</p><ul><li>åŒ…ç®¡ç†å™¨çš„é”æ–‡ä»¶å†…å®¹ï¼Œä¾‹å¦‚ package-lock.jsonï¼Œyarn.lockï¼Œpnpm-lock.yamlï¼Œæˆ–è€… bun.lockb å‘ç”Ÿäº†å˜åŒ–</li><li>è¡¥ä¸æ–‡ä»¶å¤¹çš„ä¿®æ”¹æ—¶é—´å‘ç”Ÿäº†å˜åŒ–</li><li>vite.config.js ä¸­çš„ç›¸å…³å­—æ®µå‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ä¹Ÿå­˜åœ¨ä¾èµ–é¢„æ„å»ºçš„ç›¸å…³é…ç½®ï¼Œä¾èµ–é¢„æ„å»ºç›¸å…³é…ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œè‡ªç„¶éœ€è¦é‡æ–°é¢„æ„å»ºã€‚</li><li>NODE_ENV çš„å€¼å˜åŠ¨</li></ul><p>ä¸Šè¿°ä»»æ„ä¸€é¡¹å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œéœ€è¦é‡æ–°è¿è¡Œé¢„æ„å»ºã€‚</p><p>å¦å¤–ï¼Œå·²é¢„æ„å»ºçš„ä¾èµ–ï¼Œ<strong>åœ¨æµè§ˆå™¨ç«¯ä¹Ÿä¼šå­˜åœ¨ç¼“å­˜</strong>ã€‚ä¼šä½¿ç”¨ HTTP å¤´ max-age=31536000, immutable è¿›è¡Œ<strong>å¼ºç¼“å­˜</strong>ï¼Œä»¥æé«˜å¼€å‘æœŸé—´é¡µé¢é‡æ–°åŠ è½½çš„æ€§èƒ½ã€‚ä¸€æ—¦è¢«ç¼“å­˜ï¼Œè¿™äº›è¯·æ±‚å°†æ°¸è¿œä¸ä¼šå†æ¬¡è®¿é—®å¼€å‘æœåŠ¡å™¨ã€‚</p><p>å¦‚æœå®‰è£…äº†ä¸åŒç‰ˆæœ¬çš„ä¾èµ–é¡¹ï¼ˆè¿™åæ˜ åœ¨åŒ…ç®¡ç†å™¨çš„ lockfile ä¸­ï¼‰ï¼Œåˆ™ä¼šé€šè¿‡é™„åŠ ç‰ˆæœ¬æŸ¥è¯¢æŠŠä¹‹å‰çš„å¼ºç¼“å­˜è‡ªåŠ¨å¤±æ•ˆã€‚</p><p>ä¾‹å¦‚ï¼šå½“å‰é¡¹ç›®ä½¿ç”¨äº† lodashï¼Œå½“å‰ç‰ˆæœ¬ä¸º 4.17.19</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://localhost:3000/node_modules/.vite/lodash.js?v=4.17.19</span></span></code></pre></div><p>ä¹‹åå¯¹ lodash ç‰ˆæœ¬å‡çº§ï¼Œå‡çº§åˆ° 4.17.20ï¼Œé”æ–‡ä»¶å†…å®¹å˜åŒ–ä¼šå¯¼è‡´é‡æ–°é¢„æ„å»º</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http://localhost:3000/node_modules/.vite/lodash.js?v=4.17.20</span></span></code></pre></div><p>URLå‘ç”Ÿå˜åŒ–åï¼Œæµè§ˆå™¨å°±ä¼šå‘ç”Ÿæ–°çš„è¯·æ±‚åˆ°å¼€å‘æœåŠ¡å™¨ï¼Œè€Œä¸å†ä½¿ç”¨æ—§çš„ç¼“å­˜ã€‚</p><p><strong>è‡ªå®šä¹‰é¢„æ„å»ºè¡Œä¸º</strong></p><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ optimizeDeps å¯¹é¢„æ„å»ºè¡Œä¸ºè¿›è¡Œé…ç½®ã€‚ä¸€ä¸ªåŸºæœ¬çš„æ ¼å¼ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å…¶ä»–çš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>1. entries</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>Vite ä¼šæŠ“å– index.html æ¥æ£€æµ‹éœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹</strong>ï¼ˆå¿½ç•¥node_modulesã€build.outDirã€_<em>tests</em>_ å’Œ coverageï¼‰ã€‚<strong>å¦‚æœæŒ‡å®šäº† build.rollupOptions.inputï¼ŒVite å°†è½¬è€Œå»æŠ“å–è¿™äº›å…¥å£ç‚¹</strong>ã€‚</p><p>å¦‚æœè¿™ä¸¤è€…éƒ½ä¸åˆæ„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <strong>entries é€‰é¡¹</strong>æŒ‡å®šè‡ªå®šä¹‰æ¡ç›®ï¼Œåœ¨ Vite ä¸­æ˜ç¡®æŒ‡å®šåº”å½“è¢«é¢„æ„å»ºçš„<strong>ä¾èµ–å…¥å£</strong>ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼šåŸºæœ¬ç”¨æ³•</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-project/</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.js         // ä¸»å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ admin.js        // ç®¡ç†å‘˜å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span>â”‚   â””â”€â”€ vendor/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ custom.js   // è‡ªå®šä¹‰åº“</span></span>
<span class="line"><span>â”œâ”€â”€ index.html</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js</span></span></code></pre></div><p>é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    entries: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/main.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/admin.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¾å¼æŒ‡å®šå…¥å£æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨ glob æ¨¡å¼</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">export.default </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // viteä¼šæ‰«æsrcç›®å½•ä¸‹é¢çš„æ‰€æœ‰çš„.jsæ–‡ä»¶ï¼Œä¹‹åä¼šå°†è¿™äº›æ–‡ä»¶å¼•ç”¨çš„ä¾èµ–åšä¸€ä¸ªé¢„æ„å»ºå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    entries: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ glob æ¨¡å¼åŒ¹é…æ‰€æœ‰ JS æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ç¤ºä¾‹ 3ï¼šå¿½ç•¥ç‰¹å®šç›®å½•</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    entries: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;src/**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŒ¹é…æ‰€æœ‰ JS æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;!src/experimental/**/*.js&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ä½†å¿½ç•¥ experimental ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>2. includeå’Œexclude</strong></p><p>includeç”¨äºåŒ…å«æŸä¸ªåŒ…ï¼Œexcludeç”¨äºæ’é™¤æŸä¸ªåŒ…ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¢„æ„å»ºä¸»è¦æ˜¯é’ˆå¯¹ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ node_modules ä¸‹é¢çš„åŒ…ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-lib/components/**/*.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>3. esbuildOptions</strong></p><p>Vite ä½¿ç”¨ esbuild æ¥é¢„æ„å»ºé¡¹ç›®ä¾èµ–ï¼Œä»¥æé«˜å¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨é€Ÿåº¦å’Œæ•´ä½“æ„å»ºæ€§èƒ½ã€‚</p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒVite çš„é»˜è®¤è®¾ç½®å·²ç»è¶³å¤Ÿé«˜æ•ˆã€‚ç„¶è€Œï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦å¯¹ esbuild çš„è¡Œä¸ºè¿›è¡Œç‰¹å®šçš„è°ƒæ•´ï¼Œä¾‹å¦‚ï¼Œæ›´æ”¹æºæ˜ å°„ç”Ÿæˆã€å®šä¹‰å®æ›¿æ¢ç­‰ï¼Œä»¥é€‚åº”ç‰¹å®šçš„é¡¹ç›®éœ€æ±‚æˆ–è§£å†³å…¼å®¹æ€§é—®é¢˜ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼šè‡ªå®šä¹‰æºæ˜ å°„</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    esbuildOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sourcemap: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;inline&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å°†æºæ˜ å°„ç›´æ¥åµŒå…¥åˆ°è¾“å‡ºæ–‡ä»¶ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨å®æ›¿æ¢</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    esbuildOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      define: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;process.env.NODE_ENV&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;production&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;__VERSION__&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;1.0.0&quot;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ç¤ºä¾‹ 3ï¼šè°ƒæ•´ç›®æ ‡ JavaScript ç‰ˆæœ¬</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    esbuildOptions: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // esbuildåœ¨å¯¹ä¾èµ–è¿›è¡Œé¢„æ„å»ºçš„æ—¶å€™ï¼Œä¼šå°†å…¶ç¼–è¯‘ä¸ºES2015å…¼å®¹çš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;es2015&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>4. force</strong></p><p>è®¾ç½®ä¸º true å¯ä»¥å¼ºåˆ¶ä¾èµ–é¢„æ„å»ºï¼Œè€Œå¿½ç•¥ä¹‹å‰å·²ç»ç¼“å­˜è¿‡çš„ã€å·²ç»ä¼˜åŒ–è¿‡çš„ä¾èµ–ã€‚</p><h1 id="æ„å»ºç”Ÿäº§ç‰ˆæœ¬" tabindex="-1">æ„å»ºç”Ÿäº§ç‰ˆæœ¬ <a class="header-anchor" href="#æ„å»ºç”Ÿäº§ç‰ˆæœ¬" aria-label="Permalink to &quot;æ„å»ºç”Ÿäº§ç‰ˆæœ¬&quot;">â€‹</a></h1><p><strong>æ„å»ºå·¥å…·</strong></p><p>ä¸åŒäº <strong>ä¾èµ–é¢„æ„å»º</strong> ç”¨åˆ°çš„ esbuildï¼Œç”Ÿäº§æ„å»ºä½¿ç”¨çš„å·¥å…·æ˜¯ rollup. å› ä¸º rollup æä¾›äº†ä¸€äº›ç‰¹æ€§å’Œä¼˜åŠ¿ï¼Œç‰¹åˆ«é€‚åˆç”¨äºç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ‰“åŒ…å’Œä¼˜åŒ–ã€‚</p><p><strong>1. ä»£ç åˆ†å‰²å’ŒåŠ¨æ€å¯¼å…¥</strong></p><p>rollup æ”¯æŒé«˜çº§çš„<strong>ä»£ç åˆ†å‰²</strong>å’Œ<strong>åŠ¨æ€å¯¼å…¥</strong>åŠŸèƒ½ï¼Œè¿™å¯¹äºç°ä»£å‰ç«¯åº”ç”¨å°¤ä¸ºé‡è¦ã€‚å®ƒèƒ½å¤Ÿå¤„ç†å¤æ‚çš„å¯¼å…¥åœºæ™¯ï¼Œä¾‹å¦‚<strong>å¾ªç¯ä¾èµ–</strong>å’Œ<strong>åŠ¨æ€æ¨¡å—è·¯å¾„</strong>ï¼Œç¡®ä¿æœ€ç»ˆæ‰“åŒ…çš„æ–‡ä»¶å¤§å°æœ€å°ä¸”æ¨¡å—ä¹‹é—´çš„ä¾èµ–æ­£ç¡®å¤„ç†ã€‚è¿™äº›åŠŸèƒ½åœ¨å¤§å‹åº”ç”¨ä¸­å¯ä»¥æ˜¾è‘—æé«˜åŠ è½½æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p><p><strong>2. Tree Shaking</strong></p><p>è™½ç„¶ esbuild ä¹Ÿæ”¯æŒ tree shakingï¼Œä½† rollup çš„ tree shaking èƒ½åŠ›é€šå¸¸è¢«è®¤ä¸ºæ›´ä¸ºå¼ºå¤§å’Œç²¾å‡†ã€‚rollup èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°è¯†åˆ«å¹¶å‰”é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œè¿™å¯¹äºå‡å°‘æœ€ç»ˆç”Ÿäº§åŒ…çš„ä½“ç§¯è‡³å…³é‡è¦ã€‚</p><p><strong>3. æ’ä»¶ç”Ÿæ€</strong></p><p>rollup æ‹¥æœ‰ä¸€ä¸ªæˆç†Ÿä¸”å¹¿æ³›çš„<strong>æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ</strong>ï¼Œè¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾åœ°æ‰©å±•å…¶æ„å»ºè¿‡ç¨‹ï¼Œä»¥é€‚åº”å„ç§å¤æ‚å’Œç‰¹å®šçš„æ„å»ºéœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶æ”¯æŒå„ç§ CSS é¢„å¤„ç†å™¨ã€å›¾ç‰‡ä¼˜åŒ–ã€å›½é™…åŒ–ç­‰ã€‚è¿™ç§çµæ´»æ€§å¯¹äºç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé…ç½®æ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚</p><p><strong>4. è¾“å‡ºæ§åˆ¶å’Œä¼˜åŒ–</strong></p><p>rollup æä¾›äº†<strong>æ›´ç»†ç²’åº¦çš„æ§åˆ¶è¾“å‡ºæ ¼å¼å’Œç»“æ„çš„åŠŸèƒ½</strong>ï¼Œè¿™å¯¹äºéœ€è¦ç²¾ç¡®æ§åˆ¶æ–‡ä»¶ç»“æ„å’Œæ¨¡å—åŒ–æ–¹å¼çš„ç°ä»£åº”ç”¨å¼€å‘éå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œrollup å¯ä»¥ç”Ÿæˆæ›´ä¸ºä¼˜åŒ–çš„ ES æ¨¡å—ä»£ç ï¼Œè¿™æœ‰åŠ©äºåœ¨ç°ä»£æµè§ˆå™¨ä¸­å®ç°æ›´å¥½çš„æ€§èƒ½ã€‚</p><p><strong>5. ç”Ÿäº§ä¼˜åŒ–</strong></p><p>è™½ç„¶ esbuild çš„æ„å»ºé€Ÿåº¦éå¸¸å¿«ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ„å»ºé€Ÿåº¦è™½é‡è¦ï¼Œ<strong>ä»£ç è´¨é‡</strong>å’Œ<strong>ä¼˜åŒ–ç¨‹åº¦</strong>æ›´ä¸ºå…³é”®ã€‚rollup åœ¨è¿™æ–¹é¢æä¾›äº†æ›´å¤šçš„ä¼˜åŒ–ç­–ç•¥ï¼Œå¦‚æ›´å¤æ‚çš„ä»£ç åˆ†å‰²å’ŒåŠ è½½ç­–ç•¥ï¼Œè¿™æœ‰åŠ©äºæé«˜åº”ç”¨çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼šä¸åŒç¯å¢ƒä¸‹çš„æ‰“åŒ…ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸ä¸€æ ·</p><ul><li>å¼€å‘ç¯å¢ƒï¼šè¿½æ±‚çš„æ˜¯æ„å»ºé€Ÿåº¦</li><li>ç”Ÿäº§ç¯å¢ƒï¼šæ›´å¤šè€ƒè™‘çš„æ˜¯æ‰“åŒ…å‡ºæ¥çš„ä»£ç çš„è´¨é‡</li></ul><p><strong>è‡ªå®šä¹‰æ„å»º</strong></p><p>å¦‚æœä»…ä»…æ˜¯è¦æŠŠé¡¹ç›®æ„å»ºä¸ºç”Ÿäº§ç‰ˆæœ¬ï¼Œé‚£éå¸¸ç®€å•ï¼Œç›´æ¥ npm run build å³å¯ï¼ŒèƒŒåè¿è¡Œçš„æ˜¯ vite buildï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>ä¸è¿‡æ„å»ºç”Ÿäº§ç‰ˆæœ¬æ—¶ç»å¸¸æœ‰ä¸€äº›è‡ªå®šä¹‰çš„éœ€æ±‚ï¼Œæ­¤æ—¶åœ¨é…ç½®æ–‡ä»¶é‡Œé¢çš„ build é…ç½®é¡¹è¿›è¡Œé…ç½®ï¼Œä¸€ä¸ªåŸºæœ¬çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ„å»ºç›¸å…³çš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>è¿™é‡Œä»‹ç»ä¸€äº›å¸¸ç”¨çš„é…ç½®ã€‚</p><p><strong>1. target</strong></p><p>è¯¥é…ç½®é¡¹ç”¨äºå®šä¹‰æœ€ç»ˆæ„å»ºäº§ç‰©çš„ JS ç‰ˆæœ¬å’Œæµè§ˆå™¨å…¼å®¹æ€§ã€‚è¿™ä¸ªè®¾ç½®éå¸¸å…³é”®ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“åˆ°ä»£ç åœ¨ä¸åŒç¯å¢ƒä¸­çš„è¿è¡Œèƒ½åŠ›ä»¥åŠå¯èƒ½éœ€è¦çš„è½¬è¯‘çº§åˆ«ã€‚æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªä¾‹å­</p><p><strong>ä¾‹å­ 1ï¼šé»˜è®¤è®¾ç½®</strong></p><p>build.targetçš„é»˜è®¤å€¼æ˜¯ &#39;modules&#39;ï¼Œè¿™æ„å‘³ç€æ„å»ºå‡ºæ¥çš„äº§ç‰©é€‚ç”¨äºç°ä»£æ”¯æŒ ESM çš„æµè§ˆå™¨ï¼Œå¯¹åº”çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼š</p><ul><li>Edge 88+</li><li>Firefox 78+</li><li>Chrome 87+</li><li>Safari 14+</li></ul><p><strong>ä¾‹å­ 2ï¼šæŒ‡å®š ES ç‰ˆæœ¬</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;es2015&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ä¾‹å­ 3ï¼šæ”¯æŒç‰¹å®šæµè§ˆå™¨ç‰ˆæœ¬</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    target: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chrome58&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ä¾‹å­ 4ï¼šå¤šç›®æ ‡è®¾ç½®</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    target: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;es2020&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;firefox78&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;chrome87&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li>esbuild è™½ç„¶å¾ˆå¿«ï¼Œä½†å¯èƒ½ä¸æ”¯æŒæŸäº›å¤æ‚çš„æˆ–å°šæœªå¹¿æ³›é‡‡ç”¨çš„ JS ç‰¹æ€§ã€‚å¦‚æœé‡åˆ°äº†è¿™ä¸€ç±» esbuild ä¸æ”¯æŒçš„ç‰¹æ€§ï¼Œé‚£ä¹ˆéœ€è¦æ˜¯ Babelæ¥åšä¸€ä¸ªè¡¥å……ç¼–è¯‘ã€‚</li><li>æ›´æ”¹ build.target ä¼šå½±å“æ„å»ºçš„è¾“å‡ºå¤§å°å’Œæ€§èƒ½</li></ul><p><strong>2. outDir</strong></p><p>ç”¨äºæŒ‡å®šæ„å»ºäº§ç‰©çš„ç›®å½•ï¼Œé»˜è®¤æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ dist.</p><p><strong>3. assetsDir</strong></p><p>æŒ‡å®šç”Ÿæˆé™æ€èµ„æºçš„å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤æ˜¯ dist/assets.</p><p><strong>4. cssMinify</strong></p><p>build.cssMinify é…ç½®é¡¹å…è®¸ä½ å•ç‹¬æ§åˆ¶ CSS æ–‡ä»¶çš„æœ€å°åŒ–å‹ç¼©æ–¹å¼ï¼Œç‹¬ç«‹äº JS çš„å‹ç¼©è®¾ç½®ã€‚è¿™ä¸ªé€‰é¡¹åœ¨ä¼˜åŒ–æ„å»ºè¾“å‡ºæ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å½“ä½ éœ€è¦ç²¾ç¡®æ§åˆ¶ CSS å’Œ JS å‹ç¼©ç­–ç•¥æ—¶ã€‚ä¸‹é¢æ¥ä¸¾ä¸€äº›ä¾‹å­ï¼š</p><p><strong>ä¾‹å­ 1ï¼šé»˜è®¤è¡Œä¸º</strong></p><p>é»˜è®¤æ˜¯ä½¿ç”¨ esbuild æ¥åš CSS çš„å‹ç¼©</p><p><strong>ä¾‹å­ 2ï¼šä½¿ç”¨ Lightning CSS å‹ç¼© CSS</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cssMinify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lightningcss&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ä¾‹å­ 3ï¼šç¦ç”¨ CSS å‹ç¼©</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cssMinify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>ä¾‹å­ 4ï¼šç‹¬ç«‹é…ç½® JS å’Œ CSS å‹ç¼©</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cssMinify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;esbuild&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSå‹ç¼©ä½¿ç”¨esbuild</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terser&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // JSå‹ç¼©ä½¿ç”¨ terser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>5. minify</strong></p><p>build.minify ç”¨äºæ§åˆ¶æ„å»ºè¿‡ç¨‹ä¸­çš„ JS ä»£ç å‹ç¼©å’Œæ··æ·†ï¼Œè¿™ä¸ªè®¾ç½®å¯¹äºä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„ä»£ç å°ºå¯¸å’Œæ€§èƒ½è‡³å…³é‡è¦ã€‚</p><p><strong>é»˜è®¤ä½¿ç”¨ esbuild æ¥è¿›è¡Œå‹ç¼©</strong>ï¼Œå®ƒæ¯” terser å¿« 20-40 å€ï¼Œå‹ç¼©ç‡åªå·® 1%-2%</p><p>å¦‚æœä½ éœ€è¦æ›´é«˜çº§çš„å‹ç¼©é€‰é¡¹ï¼Œæˆ–è€…åœ¨æŸäº›æƒ…å†µä¸‹ esbuild çš„å‹ç¼©ç»“æœä¸ç¬¦åˆä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ terserã€‚</p><p>terser æä¾›äº†æ›´ç»†è‡´çš„æ§åˆ¶å’Œç¨å¾®æ›´å¥½çš„å‹ç¼©ç‡ï¼Œå°½ç®¡å®ƒçš„é€Ÿåº¦è¾ƒæ…¢ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terser</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terser&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // JSå‹ç¼©ä½¿ç”¨ terser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>6. sourcemap</strong></p><p>æ„å»ºåæ˜¯å¦ç”Ÿæˆ source map æ–‡ä»¶ã€‚</p><ul><li>å¦‚æœä¸º trueï¼Œå°†ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ source map æ–‡ä»¶</li><li>å¦‚æœä¸º &#39;inline&#39;ï¼Œsource map å°†ä½œä¸ºä¸€ä¸ª data URI é™„åŠ åœ¨è¾“å‡ºæ–‡ä»¶ä¸­ã€‚</li><li>&#39;hidden&#39; çš„å·¥ä½œåŸç†ä¸ true ç›¸ä¼¼ï¼Œåªæ˜¯ bundle æ–‡ä»¶ä¸­ç›¸åº”çš„æ³¨é‡Šå°†ä¸è¢«ä¿ç•™ã€‚</li></ul><p><strong>7. rollupOptions</strong></p><p>å› ä¸ºåº•å±‚ä½¿ç”¨çš„æ˜¯ rollup è¿›è¡Œæ‰“åŒ…ï¼Œå› æ­¤æ”¯æŒæ‰€æœ‰çš„ <a href="https://rollupjs.org/configuration-options/" target="_blank" rel="noreferrer">rollupé…ç½®é€‰é¡¹</a>ã€‚</p><p>rollupOptions é…ç½®é¡¹å¯¹åº”æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å’Œ rollup é…ç½®æ–‡ä»¶å¯¼å‡ºçš„é€‰é¡¹ç›¸åŒã€‚</p><p><strong>ç¤ºä¾‹</strong>ï¼š</p><ol><li>æ·»åŠ ä¸€ä¸ª rollup æ’ä»¶æ¥å¤„ç†å›¾åƒ</li><li>æŒ‡å®š some-external-lib ä¸ºå¤–éƒ¨ä¾èµ–</li><li>ä¸ºè¿™ä¸ªå¤–éƒ¨ä¾èµ–æä¾›ä¸€ä¸ªå¯è®¿é—®çš„å…¨å±€å˜é‡ SomeExternalLib</li></ol><p>é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@rollup/plugin-image&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å›¾åƒçš„ Rollup æ’ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      plugins:[</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        images</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šè¿‡è¿™ä¸ªrollupæ’ä»¶æ¥å¤„ç†å›¾åƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      external: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;some-external-lib&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‡å®šsome-external-libä¸ºå¤–éƒ¨ä¾èµ–ï¼Œä¸ä¼šè¢«æ‰“åŒ…è¿›å»</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      	globals: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      		&#39;some-external-lib&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SomeExternalLib&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>å…¬å…±åŸºç¡€è·¯å¾„</strong></p><p>è¯¥é…ç½®é¡¹<strong>ä¸å±äº build é‡Œé¢çš„é…ç½®é¡¹</strong>ï¼Œä½†ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é…ç½®é¡¹ï¼Œä¸»è¦ç”¨äºé…ç½®å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬å…¬å…±è·¯å¾„ã€‚</p><ul><li>ç±»å‹ï¼šstring</li><li>é»˜è®¤å€¼ï¼š/</li><li>æè¿°ï¼šç”¨äºé…ç½®å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬å…¬å…±è·¯å¾„ï¼Œæœ‰æ•ˆå€¼åŒ…æ‹¬ï¼š <ul><li>ç»å¯¹ URL è·¯å¾„åï¼Œä¾‹å¦‚ /foo/</li><li>å®Œæ•´ URLï¼Œä¾‹å¦‚ <a href="https://bar.com/foo/%EF%BC%88%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%AD%E4%B8%8D%E4%BC%9A%E4%BD%BF%E7%94%A8" target="_blank" rel="noreferrer">https://bar.com/foo/ï¼ˆå¼€å‘ç¯å¢ƒä¸­ä¸ä¼šä½¿ç”¨</a> origin éƒ¨åˆ†ï¼Œå› æ­¤å…¶å€¼ä¸ /foo/ ç›¸åŒï¼‰</li><li>ç©ºå­—ç¬¦ä¸²æˆ– ./ï¼ˆç”¨äºåµŒå…¥å¼éƒ¨ç½²ï¼‰</li></ul></li></ul><p>ä¸¾ä¾‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">project</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”œâ”€â”€ public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚   â””â”€â”€ index.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”œâ”€â”€ src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚   â”œâ”€â”€ main.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”‚   â””â”€â”€ App.vue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â”œâ”€â”€ vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">â””â”€â”€ package.json</span></span></code></pre></div><p>é…ç½®æ–‡ä»¶ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  base: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/my-app/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®åŸºæœ¬å…¬å…±è·¯å¾„ä¸º &#39;/my-app/&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ä¹‹åè¦è®¿é—®é™æ€èµ„æºçš„æ—¶å€™ï¼Œå…¨éƒ¨ä¼šä»¥ /my-app/ä½œä¸ºå‰ç¼€</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;My App&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/my-app/src/main.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>å‡è®¾é¡¹ç›®æ‰“åŒ…ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-project/</span></span>
<span class="line"><span>â”œâ”€â”€ dist/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ assets/</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ main.12345.js</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ style.67890.css</span></span>
<span class="line"><span>â”‚   â””â”€â”€ index.html</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js</span></span></code></pre></div><p>dist/index.htmlï¼Œè¦è®¿é—®é™æ€èµ„æºï¼Œä¹Ÿéœ€è¦æ·»åŠ å…¬å…±è·¯å¾„ï¼š</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;en&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> charset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;viewport&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;My App&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/my-app/assets/style.67890.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/my-app/assets/main.12345.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>æ€è€ƒğŸ¤”ï¼šä¸ºä»€ä¹ˆè¦é…ç½®è¿™ä¹ˆä¸€ä¸ªè·¯å¾„ï¼Ÿ</p><p>ç­”æ¡ˆï¼šå› ä¸ºæœ‰äº›æ—¶å€™æˆ‘ä»¬çš„åº”ç”¨å¹¶ééƒ¨ç½²åœ¨æ ¹ç›®å½•ä¸‹é¢ï¼Œè€Œæ˜¯éƒ¨ç½²åœ¨æŸä¸€ä¸ªå­è·¯å¾„æˆ–è€…å­ç›®å½•ä¸‹é¢ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é€šè¿‡ base ä¿è¯ä½ çš„é™æ€èµ„æºèƒ½å¤Ÿæ­£ç¡®è¢«åŠ è½½ã€‚</p><p><strong>åº“æ¨¡å¼</strong></p><p>åº“æ¨¡å¼æŒ‡çš„æ˜¯å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªä¾èµ–åº“ï¼Œæ–¹ä¾¿å…¶ä»–åº”ç”¨æ¥ä½¿ç”¨ã€‚è¿™é‡Œå¯ä»¥åœ¨ lib é…ç½®é¡¹é‡Œé¢è¿›è¡Œé…ç½®ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ....</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>å’Œæ™®é€šæ¨¡å¼åŒºåˆ«ï¼š</p><ol><li>å…¥å£æ–‡ä»¶ <ul><li>æ™®é€šåº”ç”¨ï¼šä¸€èˆ¬æ˜¯ index.htmlï¼Œæ‰€æœ‰çš„èµ„æºä»è¿™ä¸ªå…¥å£ HTML æ–‡ä»¶å¼€å§‹åŠ è½½ã€‚</li><li>åº“æ¨¡å¼ï¼šå…¥å£æ–‡ä»¶é€šå¸¸æ˜¯ä¸€ä¸ª JS æ–‡ä»¶ï¼Œå› ä¸ºåº“é€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ªèµ„æºè¢«å…¶ä»–é¡¹ç›®å¼•ç”¨</li></ul></li><li>è¾“å‡ºæ ¼å¼ <ul><li>æ™®é€šåº”ç”¨ï¼šé€šè¿‡åªé’ˆå¯¹ç‰¹å®šçš„è¿è¡Œç¯å¢ƒï¼ˆå¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒå³å¯ï¼‰è¿›è¡Œæ‰“åŒ…</li><li>åº“æ¨¡å¼ï¼šå¾€å¾€éœ€è¦æ”¯æŒå¤šç§æ¨¡å—ç³»ç»Ÿï¼ŒåŒ…æ‹¬ UMDã€ESMã€CommonJS è¿™äº›ç±»å‹ã€‚</li></ul></li><li>å¤–éƒ¨ä¾èµ– <ul><li>æ™®é€šåº”ç”¨ï¼šå°†æ‰€æœ‰çš„ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶é‡Œé¢</li><li>åº“æ¨¡å¼ï¼šå¾€å¾€éœ€è¦å°†å¤–éƒ¨ä¾èµ–æ’é™¤æ‰</li></ul></li></ol><p>æ€»ç»“ï¼šåœ¨åº“æ¨¡å¼ä¸­ï¼Œéœ€è¦é…ç½®<strong>å…¥å£ç‚¹ã€åº“çš„åç§°ã€è¾“å‡ºæ–‡ä»¶åï¼Œä»¥åŠå¦‚ä½•å¤„ç†å¤–éƒ¨ä¾èµ–</strong>ã€‚è¿™äº›é…ç½®ç¡®ä¿åº“è¢«æ‰“åŒ…æˆé€‚ç”¨äºä¸åŒæ¶ˆè´¹åœºæ™¯çš„æ ¼å¼ã€‚</p><p>å‡è®¾æœ‰å¦‚ä¸‹çš„é¡¹ç›®ç›®å½•ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-lib/</span></span>
<span class="line"><span>â”œâ”€â”€ lib/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.js        // åº“çš„å…¥å£æ–‡ä»¶</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ Foo.vue        // Vue ç»„ä»¶</span></span>
<span class="line"><span>â”‚   â””â”€â”€ Bar.vue        // å¦ä¸€ä¸ª Vue ç»„ä»¶</span></span>
<span class="line"><span>â”œâ”€â”€ index.html         // ç”¨äºå¼€å‘æµ‹è¯•çš„ HTML æ–‡ä»¶</span></span>
<span class="line"><span>â”œâ”€â”€ package.json</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js     // Vite é…ç½®æ–‡ä»¶</span></span></code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦å°†å…¶æ‰“åŒ…æˆä¸€ä¸ªåº“ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lib: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      entry: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lib/main.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyLib&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`my-lib.\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}.js\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      external: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        globals: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          vue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ul><li>entry: æŒ‡å®šåº“çš„å…¥å£æ–‡ä»¶</li><li>nameï¼šæŒ‡å®šä½ çš„åº“åœ¨ UMD æˆ–è€… IIFE ç¯å¢ƒä¸‹çš„å…¨å±€å˜é‡çš„åç§°</li><li>fileName: æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶çš„æ–‡ä»¶å</li><li>externalï¼šæ’é™¤å“ªäº›å¤–éƒ¨ä¾èµ–</li><li>globalsï¼šå¤–éƒ¨ä¾èµ–åœ¨ UMD æˆ–è€… IIFE æ ¼å¼ä¸‹å…¨å±€å˜é‡çš„åç§°</li></ul><p>é…ç½®æ–‡ä»¶å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡ vite build è¿›è¡Œåº“æ¨¡å¼çš„æ„å»º</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-lib/</span></span>
<span class="line"><span>â”œâ”€â”€ dist/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ my-lib.es.js        // ES æ¨¡å—æ ¼å¼</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ my-lib.umd.js       // UMD æ ¼å¼</span></span>
<span class="line"><span>â”‚   â””â”€â”€ assets/             // åŒ…å«æ‰€æœ‰é™æ€èµ„æºï¼Œå¦‚ç¼–è¯‘åçš„ CSS</span></span>
<span class="line"><span>â””â”€â”€ ...</span></span></code></pre></div><p>æ„å»ºå‡ºæ¥çš„äº§ç‰©æ˜¯å¤šç§æ ¼å¼ï¼Œå› ä¸ºè¦åº”å¯¹ä¸åŒçš„ç¯å¢ƒä¸‹ä½¿ç”¨è¿™ä¸ªåº“ã€‚</p><p>æœ€åè¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ­¥éª¤ï¼šéœ€è¦åœ¨ package.json é‡Œé¢å»é…ç½®ä¸åŒç¯å¢ƒçš„å…¥å£æ–‡ä»¶ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;files&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/my-lib.umd.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/my-lib.es.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/my-lib.es.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/my-lib.umd.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="ç¯å¢ƒå˜é‡ä¸æ¨¡å¼" tabindex="-1">ç¯å¢ƒå˜é‡ä¸æ¨¡å¼ <a class="header-anchor" href="#ç¯å¢ƒå˜é‡ä¸æ¨¡å¼" aria-label="Permalink to &quot;ç¯å¢ƒå˜é‡ä¸æ¨¡å¼&quot;">â€‹</a></h1><p><strong>è®¤è¯†ç¯å¢ƒå˜é‡</strong></p><p>ä»¥æœ€ç†Ÿæ‚‰çš„ import.meta.env.BASE_URL ä¸ºä¾‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// router/index.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> router</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createRouter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  history: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWebHashHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BASE_URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  routes: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>è¯¥å˜é‡åœ¨ï¼š</p><ul><li>å¼€å‘ç¯å¢ƒä¸­ï¼Œé»˜è®¤å€¼é€šå¸¸æ˜¯ &#39;/&#39;</li><li>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªå€¼å¯ä»¥æ ¹æ® vite.config.js æ–‡ä»¶ä¸­çš„ base é…ç½®é¡¹è¿›è¡Œè®¾ç½®</li></ul><p>Vite å…¶ä»–å†…ç½®ç¯å¢ƒå˜é‡ï¼š</p><ul><li>import.meta.env.MODEï¼šè·å–å½“å‰åº”ç”¨è¿è¡Œçš„æ¨¡å¼</li><li>import.meta.env.PRODï¼šåº”ç”¨æ˜¯å¦è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒ</li><li>import.meta.env.DEVï¼šåº”ç”¨æ˜¯å¦è¿è¡Œåœ¨å¼€å‘ç¯å¢ƒ</li><li>import.meta.env.SSRï¼šåº”ç”¨æ˜¯å¦è¿è¡Œåœ¨ server ä¸Š</li></ul><p><strong>NODE_ENVå’Œæ¨¡å¼</strong></p><p>ä»£ç è¿è¡Œæœ‰ä¸åŒçš„ç¯å¢ƒï¼š</p><ol><li>å¼€å‘ç¯å¢ƒ</li><li>æµ‹è¯•ç¯å¢ƒ</li><li>ç”Ÿäº§ç¯å¢ƒ</li></ol><p>ä¸åŒçš„ç¯å¢ƒï¼Œéœ€è¦ä¸åŒçš„é…ç½®æ¥æ»¡è¶³éœ€æ±‚ã€‚</p><p>ä¾‹å¦‚ï¼š</p><p><strong>æ•°æ®åº“è¿æ¥</strong></p><ul><li>å¼€å‘ç¯å¢ƒï¼šé€šå¸¸è¿æ¥åˆ°æœ¬åœ°æ•°æ®åº“æˆ–å¼€å‘ç”¨çš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿™äº›æ•°æ®åº“å¯èƒ½åŒ…å«æµ‹è¯•æ•°æ®æˆ–æ¨¡æ‹Ÿæ•°æ®ã€‚</li><li>æµ‹è¯•ç¯å¢ƒï¼šè¿æ¥åˆ°æ¨¡æ‹ŸçœŸå®è¿è¡ŒçŠ¶æ€çš„æµ‹è¯•æ•°æ®åº“ï¼Œè¿™äº›æ•°æ®åº“ä¸­çš„æ•°æ®ç»“æ„å’Œç”Ÿäº§ç¯å¢ƒä¸€è‡´ï¼Œä½†æ•°æ®é€šå¸¸æ˜¯åŒ¿ååŒ–æˆ–ä¸“ä¸ºæµ‹è¯•å‡†å¤‡çš„ã€‚</li><li>ç”Ÿäº§ç¯å¢ƒï¼šè¿æ¥åˆ°åŒ…å«çœŸå®ç”¨æˆ·æ•°æ®çš„ç”Ÿäº§æ•°æ®åº“ï¼Œä¸”é€šå¸¸å…·æœ‰é«˜å¯ç”¨æ€§å’Œé¢å¤–çš„å®‰å…¨é…ç½®ã€‚</li></ul><p><strong>APIå¯†é’¥å’Œå‡­è¯</strong></p><ul><li>å¼€å‘ç¯å¢ƒï¼šå¯èƒ½ä½¿ç”¨å…·æœ‰é™åˆ¶æƒé™çš„APIå¯†é’¥ï¼Œè¿™äº›å¯†é’¥ç”¨äºé˜²æ­¢åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯¹çœŸå®æ•°æ®é€ æˆå½±å“ã€‚</li><li>æµ‹è¯•ç¯å¢ƒï¼šä½¿ç”¨ä¸“ä¸ºæµ‹è¯•è®¾è®¡çš„å¯†é’¥ï¼Œè¿™äº›å¯†é’¥å¯èƒ½å…è®¸è®¿é—®æ›´å¤šçš„æµ‹è¯•æ¥å£æˆ–æ¨¡æ‹Ÿæ•°æ®ã€‚</li><li>ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨å…·æœ‰å®Œæ•´è®¿é—®æƒé™çš„APIå¯†é’¥ï¼Œè¿™äº›å¯†é’¥é€šå¸¸éœ€è¦ä¸¥æ ¼ä¿å¯†ï¼Œä»¥ä¿æŠ¤åº”ç”¨å’Œç”¨æˆ·æ•°æ®çš„å®‰å…¨ã€‚</li></ul><p><strong>é”™è¯¯å¤„ç†</strong></p><ul><li>å¼€å‘ç¯å¢ƒï¼šé”™è¯¯å¯èƒ½ç›´æ¥æ˜¾ç¤ºè¯¦ç»†çš„å †æ ˆä¿¡æ¯ï¼Œä¾¿äºå¼€å‘è€…å¿«é€Ÿå®šä½é—®é¢˜ã€‚</li><li>æµ‹è¯•ç¯å¢ƒï¼šé”™è¯¯å¤„ç†å¯èƒ½åŒ…æ‹¬å°†é”™è¯¯è¯¦ç»†è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼ŒåŒæ—¶æ˜¾ç¤ºç»™å®šçš„é”™è¯¯æ¶ˆæ¯ä»¥æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒçš„è¡Œä¸ºã€‚</li><li>ç”Ÿäº§ç¯å¢ƒï¼šé”™è¯¯å¤„ç†æ—¨åœ¨ä¸æ³„éœ²ä»»ä½•æ•æ„Ÿä¿¡æ¯ï¼Œé€šå¸¸åªæä¾›ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯å’Œä¸€ä¸ªé”™è¯¯ä»£ç ï¼ŒåŒæ—¶å°†è¯¦ç»†ä¿¡æ¯è®°å½•åœ¨æœåŠ¡å™¨çš„å®‰å…¨æ—¥å¿—ä¸­ã€‚</li></ul><p>å¦‚ä½•æŒ‡å®šä»£ç è¿è¡Œçš„ç¯å¢ƒå‘¢ï¼Ÿ</p><p>ä¸€èˆ¬å¯ä»¥é€šè¿‡ NODE_ENV è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œè¯¥å˜é‡å¯ä»¥<strong>æŒ‡å®šä»£ç çš„è¿è¡Œç¯å¢ƒ</strong>ï¼Œæ¯”å¦‚ developmentã€production æˆ– test</p><p>é€šè¿‡æŒ‡å®šè¿è¡Œç¯å¢ƒï¼Œä»è€Œèƒ½å¤Ÿï¼š</p><ul><li><p>æ§åˆ¶ä»£ç è¡Œä¸ºï¼šå¼€å‘è€…å¯ä»¥æ ¹æ® NODE_ENV çš„å€¼åœ¨ä»£ç ä¸­åšä¸€äº›åˆ¤æ–­ï¼Œä»è€Œæ‰§è¡Œä¸åŒçš„é€»è¾‘</p></li><li><p>å½±å“æ„å»ºå·¥å…·å’Œåº“ï¼šå¾ˆå¤šå·¥å…·å’Œåº“ä¹Ÿä¼šæ ¹æ® NODE_ENV ä¸åŒçš„å€¼æœ‰ä¸åŒçš„è¡Œä¸º</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç”Ÿäº§ç¯å¢ƒçš„ç‰¹å®šé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å…¶ä»–é…ç½®...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></li></ul><p>é‚£ Vite ä¸­çš„<strong>æ¨¡å¼</strong>åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä¸€å¥è¯æ€»ç»“ï¼šåœ¨ Vite ä¸­ï¼Œæ¨¡å¼æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨å¯åŠ¨æ—¶è®¾ç½®çš„å±æ€§ï¼Œ<strong>ç”¨æ¥æŒ‡å¯¼ Vite å¦‚ä½•åŠ è½½ .env æ–‡ä»¶</strong>ã€‚</p><p>.env çš„æ–‡ä»¶<strong>ç”¨æ¥å­˜æ”¾ç¯å¢ƒå˜é‡</strong>ï¼Œä¹‹ååœ¨å®¢æˆ·ç«¯æºç ä¸­å°±å¯ä»¥é€šè¿‡ import.meta.env æ¥è®¿é—®å¯¹åº”çš„å€¼ã€‚</p><p>å¦å¤–ï¼Œ<strong>ä¸ºäº†é˜²æ­¢æ„å¤–åœ°å°†ä¸€äº›ç¯å¢ƒå˜é‡æ³„æ¼åˆ°å®¢æˆ·ç«¯ï¼Œåªæœ‰ä»¥ VITE_ ä¸ºå‰ç¼€çš„å˜é‡æ‰ä¼šæš´éœ²ç»™ç»è¿‡ vite å¤„ç†çš„ä»£ç ã€‚</strong></p><p>ä¾‹å¦‚ï¼š</p><p>.env</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>VITE_SOME_KEY=123</span></span>
<span class="line"><span>DB_PASSWORD=foobar</span></span></code></pre></div><p>è¿™é‡Œåªæœ‰ VITE_SOME_KEY ä¼šæš´éœ²ç»™å®¢æˆ·ç«¯æºç ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VITE_SOME_KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;123&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DB_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre></div><p>.env æ–‡ä»¶è¿˜å¯ä»¥æœ‰ä¸åŒçš„ç±»å‹ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.env                # æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šåŠ è½½</span></span>
<span class="line"><span>.env.local          # æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šåŠ è½½ï¼Œä½†ä¼šè¢« git å¿½ç•¥</span></span>
<span class="line"><span>.env.[mode]         # åªåœ¨æŒ‡å®šæ¨¡å¼ä¸‹åŠ è½½</span></span>
<span class="line"><span>.env.[mode].local   # åªåœ¨æŒ‡å®šæ¨¡å¼ä¸‹åŠ è½½ï¼Œä½†ä¼šè¢« git å¿½ç•¥</span></span></code></pre></div><p>è¿™é‡Œçš„ mode æŒ‡ä»£çš„å°±æ˜¯ Vite é‡Œé¢çš„æ¨¡å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ .env.development å’Œ .env.production æ–‡ä»¶ä¸­å®šä¹‰ä¸åŒçš„ç¯å¢ƒå˜é‡ï¼Œåœ¨ä½¿ç”¨ Vite å¯åŠ¨åº”ç”¨çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯¹åº”çš„æ¨¡å¼åŠ è½½å¯¹åº”çš„ .env æ–‡ä»¶ã€‚</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>my-vite-project/</span></span>
<span class="line"><span>â”œâ”€â”€ .env               # é»˜è®¤çš„ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span>â”œâ”€â”€ .env.development   # å¼€å‘ç¯å¢ƒçš„ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span>â”œâ”€â”€ .env.production    # ç”Ÿäº§ç¯å¢ƒçš„ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ main.js</span></span>
<span class="line"><span>â””â”€â”€ vite.config.js</span></span></code></pre></div><p>.env.development</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>VITE_API_URL=https://dev.api.example.com</span></span>
<span class="line"><span>DEBUG=true</span></span></code></pre></div><p>.env.production</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>VITE_API_URL=https://api.example.com</span></span>
<span class="line"><span>DEBUG=false</span></span></code></pre></div><p>ä¹‹åä½¿ç”¨ Vite å¯åŠ¨åº”ç”¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŒ‡å®šç‰¹å®šçš„æ¨¡å¼ï¼Œä»è€ŒåŠ è½½ä¸åŒçš„ .env æ–‡ä»¶</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span>vite --mode development</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç”Ÿäº§ç¯å¢ƒæ„å»º</span></span>
<span class="line"><span>vite build --mode production</span></span></code></pre></div><p>æ€è€ƒğŸ¤”ï¼šä¸ºä»€ä¹ˆæœ‰äº† NODE_DEV è¿˜éœ€è¦ mode æ¨¡å¼ï¼Ÿ</p><p>ç­”æ¡ˆï¼šNODE_DEV æ˜¯åœ¨ Node.js ç¯å¢ƒä¸­æœ€æ—©è¢«æ”¯æŒçš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå¹¿æ³›çš„è¢«ç”¨äºå„å¤§å·¥å…·å’Œåº“ã€‚è€Œæ¨¡å¼æ˜¯ç‰¹å®šäºæŸä¸ªæ„å»ºå·¥å…·ï¼Œä¸»è¦å°±æ˜¯ç”¨äºæ›´åŠ ç»†ç²’åº¦çš„åœºæ™¯æ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ mode å¯ä»¥åœ¨ä¸å½±å“ NODE_DEV çš„å‰æä¸‹å…·å¤‡æ›´é«˜çš„çµæ´»æ€§ã€‚</p><h1 id="vite-cli" tabindex="-1">Vite CLI <a class="header-anchor" href="#vite-cli" aria-label="Permalink to &quot;Vite CLI&quot;">â€‹</a></h1><p>Vite çš„ CLI åˆ†ä¸º 4 ç±»ï¼š</p><ol><li>å¼€å‘æœåŠ¡å™¨</li><li>æ„å»ºç”Ÿäº§ç‰ˆæœ¬</li><li>ä¾èµ–é¢„æ„å»º</li><li>æœ¬åœ°é¢„è§ˆæ„å»ºäº§ç‰©</li></ol><p><strong>1. å¼€å‘æœåŠ¡å™¨</strong></p><p>ç›´æ¥ä½¿ç”¨ vite å°±å¯ä»¥å¯åŠ¨ã€‚ä¾‹å¦‚ä½¿ç”¨ Vite æ­å»ºçš„é¡¹ç›®ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;dev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>å…¶ä¸­ vite dev å’Œ vite serve æ˜¯ vite çš„åˆ«åã€‚</p><p>è¿™é‡Œæ‰§è¡Œçš„ vite å…¶å®æ˜¯ <strong>node modules/.bin</strong> ç›®å½•ä¸‹çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¿™æ ·å¯åŠ¨é¡¹ç›®ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./node_modules/.bin/vite</span></span></code></pre></div><p>è¯¥å‘½ä»¤åé¢æ”¯æŒä¸€ç³»åˆ—çš„ <a href="https://cn.vitejs.dev/guide/cli.html#options" target="_blank" rel="noreferrer">å‚æ•°</a></p><p><strong>2. æ„å»ºç”Ÿäº§ç‰ˆæœ¬</strong></p><p>é€šè¿‡ vite build æ¥æ„å»ºç”Ÿäº§ç‰ˆæœ¬ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./node_modules/.bin/vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre></div><p>æ„å»ºä¹Ÿæä¾›äº† <a href="https://cn.vitejs.dev/guide/cli.html#options-1" target="_blank" rel="noreferrer">å¯é€‰å‚æ•°</a>ï¼Œå½“ç„¶æœ€æ¨èçš„è¿˜æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥è¿›è¡Œé…ç½®ï¼Œæ›´åŠ æ–¹ä¾¿ä¸€äº›ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„é…ç½®å‚æ•°ã€‚</p><ol><li><p>--target &lt;target&gt;ï¼šæŒ‡å®šç¼–è¯‘ç›®æ ‡ï¼Œé»˜è®¤ä¸º &quot;modules&quot;ã€‚å¯ç”¨äºæŒ‡å®šä¸åŒçš„æµè§ˆå™¨æ”¯æŒã€‚</p><p>ç¤ºä¾‹ï¼švite build --target es2015 å°†ä»£ç ç¼–è¯‘ä¸º ES2015 æ ‡å‡†ã€‚</p></li><li><p>--outDir &lt;dir&gt;ï¼šè®¾ç½®è¾“å‡ºç›®å½•ï¼Œé»˜è®¤ä¸º distã€‚</p><p>ç¤ºä¾‹ï¼švite build --outDir build å°†æ„å»ºè¾“å‡ºåˆ° build ç›®å½•ã€‚</p></li><li><p>--assetsDir &lt;dir&gt;ï¼šåœ¨è¾“å‡ºç›®å½•ä¸‹è®¾ç½®èµ„æºç›®å½•ï¼Œé»˜è®¤ä¸º &quot;assets&quot;ã€‚</p><p>ç¤ºä¾‹ï¼švite build --assetsDir static å°†èµ„æºæ”¾åœ¨ static ç›®å½•ä¸­ã€‚</p></li><li><p>--manifest [name]ï¼šç”Ÿæˆ manifest.json æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç”¨äºæè¿°æ„å»ºåçš„èµ„æºæ–‡ä»¶ä¸æºæ–‡ä»¶ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè¿™ä¸ªæ–‡ä»¶å¯¹äºæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æˆ–ä¸åç«¯æ¡†æ¶é›†æˆæ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©åŠ¨æ€å¼•ç”¨ç”Ÿæˆåçš„é™æ€èµ„æºã€‚</p><p>ç¤ºä¾‹ï¼švite build --manifest åœ¨æ„å»ºåç”Ÿæˆ manifest.json æ–‡ä»¶ã€‚</p></li><li><p>-c, --config &lt;file&gt;ï¼šä½¿ç”¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ã€‚</p><p>ç¤ºä¾‹ï¼švite build -c vite.config.custom.js ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ vite.config.custom.jsã€‚</p></li><li><p>--base &lt;path&gt;ï¼šè®¾ç½®å…¬å…±åŸºç¡€è·¯å¾„ï¼Œé»˜è®¤ä¸º /ã€‚</p><p>ç¤ºä¾‹ï¼švite build --base /myapp/ å°†åŸºç¡€è·¯å¾„è®¾ç½®ä¸º /myapp/ã€‚</p></li></ol><p>æ€è€ƒğŸ¤”ï¼šå¦‚æœåœ¨ CLI å’Œé…ç½®æ–‡ä»¶ä¸­éƒ½æŒ‡å®šäº†ç›¸åŒçš„å‚æ•°ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p><p>ç­”æ¡ˆï¼šCLI é…ç½®çš„å‚æ•°çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šè¦†ç›–é…ç½®æ–‡ä»¶é‡Œé¢çš„å‚æ•°ã€‚</p><p><strong>3. ä¾èµ–é¢„æ„å»º</strong></p><p>ç›¸å½“äºæ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡ä¾èµ–çš„é¢„æ„å»ºï¼Œå¤§å¤šæ•°æƒ…å†µä¸å¤ªéœ€è¦ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚å…·ä½“çš„ CLI å‘½ä»¤é¡¹è¯·å‚é˜… <a href="https://cn.vitejs.dev/guide/cli.html#vite-optimize" target="_blank" rel="noreferrer">å®˜ç½‘</a>.</p><p><strong>æœ¬åœ°é¢„è§ˆæ„å»ºäº§ç‰©</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;preview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vite preview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span></code></pre></div><p>vite preview å‘½ä»¤åœ¨ Vite ä¸­ç”¨äºå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„é™æ€é¢„è§ˆæœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä¸»è¦ç”¨æ¥é¢„è§ˆæ„å»ºåçš„åº”ç”¨ã€‚</p><p><strong>ä½œç”¨å’Œç”¨é€”</strong></p><ol><li><p>é¢„è§ˆç”Ÿäº§æ„å»º</p></li><li><p>æ£€æµ‹éƒ¨ç½²é—®é¢˜</p></li></ol><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p><p>å‡è®¾ä½ å·²ç»è¿è¡Œäº† vite build å‘½ä»¤ï¼Œæ„å»ºäº†åº”ç”¨ï¼Œå¹¶ç”Ÿæˆäº† dist æ–‡ä»¶å¤¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¢„è§ˆæœåŠ¡å™¨ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> preview</span></span></code></pre></div><p>è¿™ä¸ªå‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œé»˜è®¤ç›‘å¬ 4173 ç«¯å£ï¼ˆå¦‚æœè¯¥ç«¯å£è¢«å ç”¨ï¼Œä¼šè‡ªåŠ¨å¯»æ‰¾ä¸‹ä¸€ä¸ªå¯ç”¨çš„ç«¯å£ï¼‰ï¼Œä¹‹åå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—® <a href="http://localhost:4173" target="_blank" rel="noreferrer">http://localhost:4173</a> æ¥æŸ¥çœ‹åº”ç”¨ã€‚</p><p><strong>é…ç½®é€‰é¡¹</strong></p><p>vite preview æ”¯æŒä¸€äº›å‘½ä»¤è¡Œé€‰é¡¹æ¥è‡ªå®šä¹‰æœåŠ¡å™¨çš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š</p><ul><li>--portï¼šæŒ‡å®šæœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚</li><li>--hostï¼šæŒ‡å®šæœåŠ¡å™¨çš„ä¸»æœºåï¼Œè®¾ç½®ä¸º 0.0.0.0 å¯ä»¥å…è®¸å¤–éƒ¨è®¿é—®ã€‚</li><li>--httpsï¼šå¯ç”¨ HTTPSã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¦åœ¨æŒ‡å®šç«¯å£ä¸Šå¯åŠ¨é¢„è§ˆæœåŠ¡å™¨å¹¶å…è®¸å¤–éƒ¨è®¾å¤‡è®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vite</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> preview</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8080</span></span></code></pre></div><p>è¿™å°†ä½¿ä½ çš„é¡¹ç›®åœ¨æœ¬åœ°ç½‘ç»œä¸­å¯è§ï¼Œæ–¹ä¾¿åœ¨å¤šç§è®¾å¤‡ä¸Šè¿›è¡Œæµ‹è¯•ã€‚</p><p>ä¸€å¥è¯æ€»ç»“ï¼šé€šè¿‡ vite preview å¯ä»¥æ£€æŸ¥æ‰“åŒ…åçš„ä»£ç æ˜¯å¦å·¥ä½œæ­£å¸¸ã€‚ä»¥å‰éœ€è¦è‡ªå·±ç”¨ express å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå°† dist ç›®å½•æ‰”è¿›å»ï¼Œç°åœ¨ vite ç›´æ¥ç»™ä½ æä¾›äº†è¿™ä¸ªé¢„è§ˆæœåŠ¡å™¨ï¼Œæ›´åŠ æ–¹ä¾¿ã€‚</p><h1 id="viteæ’ä»¶" tabindex="-1">Viteæ’ä»¶ <a class="header-anchor" href="#viteæ’ä»¶" aria-label="Permalink to &quot;Viteæ’ä»¶&quot;">â€‹</a></h1><p><strong>Viteä¸­ä½¿ç”¨æ’ä»¶</strong></p><ol><li>å®‰è£…æ’ä»¶</li><li>åœ¨<strong>é…ç½®æ–‡ä»¶</strong>ä¸­å¼•å…¥æ’ä»¶</li><li>åœ¨ <strong>plugins æ•°ç»„</strong>ä¸­é…ç½®æ’ä»¶</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼•å…¥æ’ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> eslintPlugin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite-plugin-eslint&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¼•å…¥çš„æ’ä»¶ä¸€èˆ¬æ˜¯ä¸€ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å› ä¸ºåœ¨ä½¿ç”¨æ’ä»¶çš„æ—¶å€™ï¼Œéœ€è¦è°ƒç”¨ä¸€ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è°ƒç”¨åä¸€èˆ¬ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eslintPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>ç›¸å…³ç»†èŠ‚</strong></p><p><strong>1. ä¼ å…¥é…ç½®é€‰é¡¹</strong></p><p>æœ‰äº›æ’ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™æ”¯æŒä¼ é€’é…ç½®é€‰é¡¹ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> legacy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@vitejs/plugin-legacy&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨ä½¿ç”¨æ’ä»¶çš„æ—¶å€™ï¼Œå‘æ’ä»¶æ–¹æ³•ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    legacy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      targets: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;defaults&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;not IE 11&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>2. æ‰§è¡Œé¡ºåº</strong></p><p>å¦‚æœé…ç½®äº†å¤šä¸ªæ’ä»¶ï¼Œé‚£ä¹ˆè¿™äº›æ’ä»¶çš„æ‰§è¡Œæ˜¯<strong>æœ‰å…ˆåé¡ºåº</strong>çš„ï¼Œä¼š<strong>æŒ‰ç…§æ•°ç»„ä»å‰åˆ°åçš„é¡ºåº</strong>æ‰§è¡Œã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pluginA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./pluginA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pluginB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./pluginB&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pluginC </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./pluginC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    pluginA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…ˆæ‰§è¡Œ pluginA</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    pluginB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç„¶åæ‰§è¡Œ pluginB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    pluginC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ€åæ‰§è¡Œ pluginC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p><strong>3. æŒ‰éœ€å¼•ç”¨</strong></p><p>é»˜è®¤æƒ…å†µä¸‹æ’ä»¶åœ¨<strong>å¼€å‘ (serve) å’Œç”Ÿäº§ (build) æ¨¡å¼ä¸­éƒ½ä¼šè°ƒç”¨</strong>ã€‚</p><p>å¦‚æœæ’ä»¶åœ¨æœåŠ¡æˆ–æ„å»ºæœŸé—´æŒ‰éœ€ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ <strong>apply å±æ€§</strong>æŒ‡æ˜å®ƒä»¬ä»…åœ¨ &#39;build&#39; æˆ– &#39;serve&#39; æ¨¡å¼æ—¶è°ƒç”¨ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typescript2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rollup-plugin-typescript2&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è¿™é‡Œå…¶å®æ ¸å¿ƒå°±æ˜¯ä¸ºè¿”å›çš„å¯¹è±¡å¢åŠ ä¸€ä¸ªå±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">typescript2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), apply: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;build&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>å¸¸ç”¨Viteæ’ä»¶</strong></p><p>Viteæ’ä»¶åˆ†ä¸ºè¿™ä¹ˆå‡ ç±»ï¼š</p><ol><li>å®˜æ–¹æ’ä»¶ï¼šå°±æ˜¯ç”± Vite å®˜æ–¹å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤çš„ï¼Œä¸€èˆ¬è¿™äº›æ’ä»¶æä¾›ä¸€äº›æ ¸å¿ƒåŠŸèƒ½æ”¯æŒã€‚ <ul><li>@vitejs/plugin-vue: æä¾›å¯¹ Vue 3 çš„æ”¯æŒï¼Œå¤„ç†å•æ–‡ä»¶ç»„ä»¶ï¼ˆ.vue æ–‡ä»¶ï¼‰</li><li>@vitejs/plugin-react: æä¾›å¯¹ React çš„æ”¯æŒï¼ŒåŒ…æ‹¬å¿«é€Ÿçš„çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰</li><li>@vitejs/plugin-legacy: æä¾›å¯¹æ—§æµè§ˆå™¨çš„æ”¯æŒï¼Œé€šè¿‡ä¸ºç°ä»£è¯­æ³•å’Œç‰¹æ€§æä¾›ä¼ ç»Ÿæµè§ˆå™¨å…¼å®¹æ€§è„šæœ¬</li></ul></li><li>ç¤¾åŒºæ’ä»¶ï¼šç”±ç¤¾åŒºæä¾›çš„æ’ä»¶ï¼Œç¤¾åŒºæ’ä»¶é€šå¸¸æä¾›æ›´å¤šçš„å’Œä¸šåŠ¡åŠŸèƒ½ä»¥åŠå®ç”¨å·¥å…·ç›¸å…³çš„æ”¯æŒã€‚ <ul><li>vite-plugin-svelte: ç”¨äºåœ¨ Vite é¡¹ç›®ä¸­é›†æˆ Svelteã€‚</li><li>vite-plugin-windicss: é›†æˆ Windi CSSï¼Œç±»ä¼¼äº Tailwind CSSï¼Œä¸º Vite é¡¹ç›®æä¾›å®ç”¨çš„æ ·å¼å·¥å…·ã€‚</li><li>vite-plugin-compressionï¼šè¿™ä¸ªæ’ä»¶ç”¨äºåœ¨æ„å»ºè¿‡ç¨‹ä¸­è‡ªåŠ¨å‹ç¼©èµ„æºæ–‡ä»¶ï¼Œæ”¯æŒ gzip æˆ–è€… brotli å‹ç¼©ï¼Œæœ‰åŠ©äºå‡å°æœ€ç»ˆéƒ¨ç½²çš„æ–‡ä»¶å¤§å°ã€‚</li><li>vite-plugin-pwa: ç”¨äºå°†ä½ çš„ Vite é¡¹ç›®è½¬æ¢æˆæ¸è¿›å¼ç½‘ç»œåº”ç”¨ï¼ˆPWAï¼‰ï¼ŒåŒ…æ‹¬è‡ªåŠ¨ç®¡ç† service worker å’Œ manifest æ–‡ä»¶ã€‚</li><li>vite-plugin-svg-iconsï¼šç”¨äºå°† SVG æ–‡ä»¶å¯¼å…¥å¹¶è‡ªåŠ¨è½¬æ¢ä¸º SVG symbolï¼Œæ–¹ä¾¿åœ¨é¡¹ç›®ä¸­ä½œä¸ºå›¾æ ‡ä½¿ç”¨ã€‚</li></ul></li><li>rollupæ’ä»¶ï¼šå› ä¸º Vite åœ¨ç”Ÿäº§é˜¶æ®µé‡‡ç”¨çš„æ˜¯ rollupï¼Œå› æ­¤ rollup æ’ä»¶ä¹Ÿå¯ä»¥åœ¨ Vite ä¸­ä½¿ç”¨ <ul><li>@rollup/plugin-image: å…è®¸å¯¼å…¥ JPG, PNG, GIF, SVG, å’Œ WebP æ–‡ä»¶ã€‚</li><li>@rollup/plugin-commonjs: å°† CommonJS æ¨¡å—è½¬æ¢ä¸º ES6ï¼Œä¾¿äºåœ¨ Vite é¡¹ç›®ä¸­ä½¿ç”¨æ›´å¤šçš„ npm åŒ…ã€‚</li><li>rollup-plugin-dsv: åŠ è½½å¹¶è§£æ .csv å’Œ .tsv æ–‡ä»¶ã€‚</li></ul></li></ol><p><strong>å¦‚ä½•è‡ªå®šä¹‰ Vite æ’ä»¶å‘¢ï¼Ÿ</strong></p><ol><li><p>Vite æ’ä»¶æ‰©å±•äº† rollup æ¥å£ï¼Œç„¶åå¸¦æœ‰ä¸€äº› Vite ç‹¬æœ‰çš„é…ç½®é¡¹ã€‚æ‰€ä»¥æƒ³è¦è‡ªå®šä¹‰ Vite æ’ä»¶ï¼Œå»ºè®®å…ˆäº†è§£ <a href="https://rollupjs.org/plugin-development/" target="_blank" rel="noreferrer">rollupæ’ä»¶å¼€å‘</a></p></li><li><p>è¿˜éœ€è¦äº†è§£ä¸€äº›ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³•ï¼Œä¸åŒçš„é’©å­åœ¨ä¸åŒçš„æ—¶é—´ç‚¹è¢«è°ƒç”¨ï¼Œè¿™ä¸ºæ’ä»¶å¼€å‘è€…æä¾›äº†æ¥å…¥ Vite å†…éƒ¨æœºåˆ¶çš„æ¥å£ï¼Œå…è®¸åœ¨ Vite çš„å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºæµç¨‹ä¸­å®ç°æ›´å¤æ‚å’Œå®šåˆ¶åŒ–çš„åŠŸèƒ½ã€‚</p></li></ol>`,340)]))}const o=i(l,[["render",t]]);export{g as __pageData,o as default};
